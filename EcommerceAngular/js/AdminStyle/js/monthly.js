!function(t){t.fn.extend({monthly:function(e){function i(t,e){return 2===t?3&e||!(e%25)&&15&e?28:29:30+(t+(t>>3)&1)}function n(n,o){t("#"+a).data("setMonth",n).data("setYear",o);var s=i(n,o),r=n-1,p=new Date(o,r,1,0,0,0,0).getDay();if(t("#"+a+" .monthly-day, #"+a+" .monthly-day-blank").remove(),t("#"+a+" .monthly-event-list").empty(),"event"==e.mode)for(var f=0;s>f;f++){var g=f+1,m=new Date(o,r,g,0,0,0,0).getDay();t("#"+a+" .monthly-day-wrap").append('<a href="#" class="m-d monthly-day monthly-day-event" data-number="'+g+'"><div class="monthly-day-number">'+g+'</div><div class="monthly-indicator-wrap"></div></a>'),t("#"+a+" .monthly-event-list").append('<div class="monthly-list-item" id="'+a+"day"+g+'" data-number="'+g+'"><div class="monthly-event-list-date">'+d[m]+"<br>"+g+"</div></div>")}else for(var f=0;s>f;f++){var g=f+1;(c>g&&n===l||h>o||l>n&&o==h)&&1==e.stylePast?t("#"+a+" .monthly-day-wrap").append('<a href="#" class="m-d monthly-day monthly-day-pick monthly-past-day" data-number="'+g+'"><div class="monthly-day-number">'+g+'</div><div class="monthly-indicator-wrap"></div></a>'):t("#"+a+" .monthly-day-wrap").append('<a href="#" class="m-d monthly-day monthly-day-pick" data-number="'+g+'"><div class="monthly-day-number">'+g+'</div><div class="monthly-indicator-wrap"></div></a>')}var v=t("#"+a).data("setMonth"),y=t("#"+a).data("setYear");if(v==l&&y==h&&t("#"+a+' *[data-number="'+c+'"]').addClass("monthly-today"),v==l&&y==h?t("#"+a+" .monthly-header-title").html(u[n-1]+" "+o):t("#"+a+" .monthly-header-title").html(u[n-1]+" "+o+'<a href="#" class="monthly-reset" title="Back To This Month"></a> '),"Sun"==e.weekStart&&7!=p)for(var f=0;p>f;f++)t("#"+a+" .monthly-day-wrap").prepend('<div class="m-d monthly-day-blank"><div class="monthly-day-number"></div></div>');else if("Mon"==e.weekStart&&0==p)for(var f=0;6>f;f++)t("#"+a+" .monthly-day-wrap").prepend('<div class="m-d monthly-day-blank" ><div class="monthly-day-number"></div></div>');else if("Mon"==e.weekStart&&1!=p)for(var f=0;p-1>f;f++)t("#"+a+" .monthly-day-wrap").prepend('<div class="m-d monthly-day-blank" ><div class="monthly-day-number"></div></div>');var b=t("#"+a+" .monthly-day").length,x=t("#"+a+" .monthly-day-blank").length,w=b+x,S=7*Math.ceil(w/7),C=S-w;if(w%7!=0)for(var f=0;C>f;f++)t("#"+a+" .monthly-day-wrap").append('<div class="m-d monthly-day-blank"><div class="monthly-day-number"></div></div>');"event"==e.mode&&t.get(""+e.xmlUrl,function(e){t(e).find("event").each(function(){function e(){t("#"+a+' .monthly-list-item[data-number="'+P+'"]').addClass("item-has-event").append('<a href="'+f+'" class="listed-event"  data-eventid="'+b+'" style="background:'+m+'" title="'+g+'">'+g+'<div><div class="monthly-list-time-start">'+x+" "+S+'</div><div class="monthly-list-time-end">'+C+" "+k+"</div></div></a>")}var i=t(this).find("startdate").text(),n=i.split("-"),o=n[0],r=parseInt(n[1],10),l=parseInt(n[2],10),h=t(this).find("enddate").text(),c=h.split("-"),u=c[0],d=parseInt(c[1],10),p=parseInt(c[2],10),f=t(this).find("url").text(),g=t(this).find("name").text(),m=t(this).find("color").text(),b=t(this).find("id").text(),x=t(this).find("starttime").text(),w=x.split(":");if(S="AM",C=t(this).find("endtime").text(),endSplit=C.split(":"),k="AM",T="",parseInt(w[0])>=12)var x=w[0]-12+":"+w[1],S="PM";if(0==parseInt(x))var x="12:"+w[1];if(parseInt(endSplit[0])>=12)var C=endSplit[0]-12+":"+endSplit[1],k="PM";if(0==parseInt(C))var C="12:"+endSplit[1];if(f)var T='href="'+f+'"';if(h||r!=v||o!=y){if(r==v&&o==y&&d==v&&u==y)for(var P=parseInt(l);P<=parseInt(p);P++)P==parseInt(l)?t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'">'+g+"</div>"):t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'"></div>'),e();else if(d==v&&u==y&&(v>r&&o==y||y>o))for(var P=0;P<=parseInt(p);P++)1==P?t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'">'+g+"</div>"):t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'"></div>'),e();else if(r==v&&o==y&&(d>v&&u==y||u>y))for(var P=parseInt(l);s>=P;P++)P==parseInt(l)?t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'">'+g+"</div>"):t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'"></div>'),e();else if((v>r&&o==y||y>o)&&(d>v&&u==y||u>y))for(var P=0;s>=P;P++)1==P?t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'">'+g+"</div>"):t("#"+a+' *[data-number="'+P+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator" data-eventid="'+b+'" style="background:'+m+'" title="'+g+'"></div>'),e()}else t("#"+a+' *[data-number="'+l+'"] .monthly-indicator-wrap').append('<div class="monthly-event-indicator"  data-eventid="'+b+'" style="background:'+m+'" title="'+g+'">'+g+"</div>"),t("#"+a+' .monthly-list-item[data-number="'+l+'"]').addClass("item-has-event").append('<a href="'+f+'" class="listed-event"  data-eventid="'+b+'" style="background:'+m+'" title="'+g+'">'+g+'<div><div class="monthly-list-time-start">'+x+" "+S+'</div><div class="monthly-list-time-end">'+C+" "+k+"</div></div></a>")})});for(var k=t("#"+a+" .m-d"),f=0;f<k.length;f+=7)k.slice(f,f+7).wrapAll("<div class='monthly-week'></div>")}function o(){t("#"+a+" .monthly-event-list").is(":visible")&&(t("#"+a+" .monthly-cal").remove(),t("#"+a+" .monthly-header-title").prepend('<a href="#" class="monthly-cal" title="Back To Month View"><div></div></a>'))}var s={weekStart:"Sun",mode:"",xmlUrl:"",target:"",eventList:!0,maxWidth:!1,setWidth:!1,startHidden:!1,showTrigger:"",stylePast:!1,disablePast:!1},e=t.extend(s,e),a=t(this).attr("id"),r=new Date,l=r.getMonth()+1,h=r.getFullYear(),c=r.getDate(),u=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"],d=["SUN","MON","TUE","WED","THU","FRI","SAT"];0!=e.maxWidth&&t("#"+a).css("maxWidth",e.maxWidth),0!=e.setWidth&&t("#"+a).css("width",e.setWidth),1==e.startHidden&&(t("#"+a).addClass("monthly-pop").css({position:"absolute",display:"none"}),t(document).on("focus",""+e.showTrigger,function(e){t("#"+a).show(),e.preventDefault()}),t(document).on("click",""+e.showTrigger+", .monthly-pop",function(t){t.stopPropagation(),t.preventDefault()}),t(document).on("click",function(e){t("#"+a).hide()})),"Sun"==e.weekStart?t("#"+a).append('<div class="monthly-day-title-wrap"><div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div></div><div class="monthly-day-wrap"></div>'):"Mon"==e.weekStart?t("#"+a).append('<div class="monthly-day-title-wrap"><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div><div>Sun</div></div><div class="monthly-day-wrap"></div>'):console.log("Incorrect entry for weekStart variable."),t("#"+a).prepend('<div class="monthly-header"><div class="monthly-header-title"></div><a href="#" class="monthly-prev"></a><a href="#" class="monthly-next"></a></div>').append('<div class="monthly-event-list"></div>'),n(l,h),t(document.body).on("click","#"+a+" .monthly-next",function(e){var i=t("#"+a).data("setMonth"),s=t("#"+a).data("setYear");if(12==i){var r=1,l=s+1;n(r,l)}else{var r=i+1,l=s;n(r,l)}o(),e.preventDefault()}),t(document.body).on("click","#"+a+" .monthly-prev",function(e){var i=t("#"+a).data("setMonth"),s=t("#"+a).data("setYear");if(1==i){var r=12,l=s-1;n(r,l)}else{var r=i-1,l=s;n(r,l)}o(),e.preventDefault()}),t(document.body).on("click","#"+a+" .monthly-reset",function(t){n(l,h),o(),t.preventDefault(),t.stopPropagation()}),t(document.body).on("click","#"+a+" .monthly-cal",function(e){t(this).remove(),t("#"+a+" .monthly-event-list").css("transform","scale(0)").delay("800").hide(),e.preventDefault()}),t(document.body).on("click","#"+a+" a.monthly-day",function(i){if("event"==e.mode&&1==e.eventList){var n=t(this).data("number");t("#"+a+" .monthly-event-list").show(),t("#"+a+" .monthly-event-list").css("transform"),t("#"+a+" .monthly-event-list").css("transform","scale(1)"),t("#"+a+' .monthly-list-item[data-number="'+n+'"]').show();var s=document.getElementById(a+"day"+n),r=s.offsetTop;t("#"+a+" .monthly-event-list").scrollTop(r),o()}else if("picker"==e.mode){var n=t(this).data("number"),l=t("#"+a).data("setMonth"),h=t("#"+a).data("setYear");t(this).hasClass("monthly-past-day")&&1==e.disablePast?i.preventDefault():(t(""+e.target).val(l+"/"+n+"/"+h),1==e.startHidden&&t("#"+a).hide())}i.preventDefault()}),t(document.body).on("click","#"+a+" .listed-event",function(e){var i=t(this).attr("href");i||e.preventDefault()})}})}(jQuery);