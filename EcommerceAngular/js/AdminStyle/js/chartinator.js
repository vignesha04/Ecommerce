!function(t,i,e,s,n){"use strict";var o=function(e,n){var o=this,a=t(e),h=a;return o.fontFamily=t("body").css("font-family").replace(/["']{1}/gi,"")||"Arial, Helvetica, sans-serif",o.optionsInit={urlJSAPI:"https://www.google.com/jsapi",googleSheetKey:!1,columns:!1,colIndexes:!1,rows:!1,tableSel:!1,dataTitle:!1,createTable:!1,ignoreRow:[],ignoreCol:[],transpose:!1,tooltipConcat:!1,annotationConcat:!1,chartType:"BarChart",chartId:"c24_chart_"+s.random().toString(36).substr(2,9),chartClass:"chtr-chart",tableId:"c24_table_"+s.random().toString(36).substr(2,9),tableClass:"chtr-table",chartAspectRatio:!1,chartZoom:0,chartOffset:!1,barChart:{fontSize:!1,fontName:o.fontFamily,chartArea:{left:"20%",top:40,width:"75%",height:"85%"},legend:{position:"bottom"}},pieChart:{fontSize:!1,fontName:o.fontFamily,chartArea:{left:"6%",top:40,width:"94%",height:"100%"}},columnChart:{fontSize:!1,fontName:o.fontFamily,chartArea:{left:"15%",top:40,width:"85%",height:"70%"},legend:{position:"bottom"}},lineChart:{fontSize:!1,fontName:o.fontFamily,chartArea:{left:"15%",top:40,width:"80%",height:"70%"},legend:{position:"bottom"}},areaChart:{fontSize:!1,fontName:o.fontFamily,chartArea:{left:"15%",top:40,width:"80%",height:"70%"},legend:{position:"bottom"}},calendar:{cellScaleFactor:.017,titleTextStyle:{color:"#000",fontWeight:"bold",fontName:o.fontFamily,fontSize:"h3"},calendar:{monthLabel:{fontSize:!1,fontName:o.fontFamily},dayOfWeekLabel:{fontSize:!1,fontName:o.fontFamily}},tooltip:{textStyle:{color:"#000",fontName:o.fontFamily,fontSize:16}}},table:{formatter:{type:"none",column:1},allowHtml:!0,cssClassNames:{headerRow:"headerRow",tableRow:"tableRow",oddTableRow:"oddTableRow",selectedTableRow:"selectedTableRow",hoverTableRow:"hoverTableRow",headerCell:"headerCell",tableCell:"tableCell",rowNumberCell:"rowNumberCell"}},showTable:"hide",showTableCSS:{position:"static",top:0,width:""},hideTableCSS:{position:"absolute",top:"-99999px",width:a.width()},showChartCSS:{},hideChartCSS:{opacity:0}},o.chartOptions={},o.cchartOptions={},o.timer=!1,o.chartId=o.optionsInit.chartId,o.tableId=o.optionsInit.tableId,o.tableHasData=!1,o.tableCaption=!1,o.googleSheetData=!1,o.dataArray=[],o.chartPackage="corechart",o.coreCharts=["BarChart","ColumnChart","PieChart","AreaChart","BubbleChart","CandlestickChart","ComboChart","Histogram","LineChart","ScatterChart","SteppedAreaChart"],o.chartParent=!1,o.windowWidth=!1,o.chartParentWidth=!1,o.init=function(i,e){o.options=t.extend(!0,{},o.optionsInit,e),o.chartId=e.chartId||h.attr("id")||o.options.chartId,o.options.tableSel&&(a=t(o.options.tableSel+" td").length?t(o.options.tableSel):a),o.tableHasData=a.find("td").length,h[0]===a[0]&&(o.tableHasData?(o.chartId=o.options.chartId,h=t('<div id="'+o.chartId+'" class="'+o.chartId+" "+o.options.chartClass+'"></div>').insertAfter(a)):a=!1),h.addClass(o.chartId+" "+o.options.chartClass).attr("id",o.chartId),o.tableHasData?(o.tableId=e.tableId||a.attr("id")||o.options.tableId,a.addClass(o.tableId+" "+o.options.tableClass).attr("id",o.tableId),o.tableCaption=a.find("caption")):o.tableId=o.options.tableId,o.chartParent=h.parent(),o.options.googleSheetKey?o.getGoogleSheet(o.options.googleSheetKey,o.setupChart):o.setupChart()},o.getGoogleSheet=function(i,e){t.ajax({type:"GET",url:"https://spreadsheets.google.com/spreadsheet/pub?key="+i+"&output=csv",dataType:"text"}).done(function(t){o.googleSheetData=t,e()}).fail(function(t){o.googleSheetData=t,e(),console.log("Google Sheet failed")})},o.setupChart=function(){if(o.dataArray=o.collectData(),!o.dataArray.length)return o.showTableChart("show","remove"),void console.log("No data found in data array");if(-1===o.coreCharts.indexOf(o.options.chartType)&&(o.chartPackage=o.options.chartType.toLowerCase()),o.options.chartOptions?o.chartOptions=o.options.chartOptions:o.options[o.camelCase(o.options.chartType)]&&(o.chartOptions=o.options[o.camelCase(o.options.chartType)]),o.cchartOptions=t.extend(!0,{},o.chartOptions),o.options.createTable){var i=o.options.dataTitle||o.cchartOptions.title||"The Chart Data";o.tableHasData?a.replaceWith(o.generateTable(o.dataArray,i,o.tableId,o.options.tableClass)):a=o.generateTable(o.dataArray,i,o.tableId,o.options.tableClass).insertBefore(h)}else o.tableHasData&&o.options.dataTitle&&o.tableCaption.text(o.options.dataTitle);o.showTableChart("hide","hide");try{t.ajax({url:o.options.urlJSAPI,dataType:"script",cache:!0}).done(function(){google.load("visualization","1",{packages:[o.chartPackage],callback:o.drawChart}),o.addResize()}).fail(function(){o.showTableChart("show","remove")})}catch(e){o.showTableChart("show","remove"),console.log(e)}},o.collectData=function(){var i=[];if(o.googleSheetData&&!o.googleSheetData.statusText?i=o.formatSheet(o.googleSheetData):o.googleSheetData&&console.log(o.googleSheetData),o.tableHasData&&(i=o.getTableData(a)),o.options.columns)if(i[0]&&i[0][0]&&i[0][0].label)if(o.options.colIndexes)for(var e=0;e<o.options.colIndexes.length;e++)i[0].splice(o.options.colIndexes[e],0,o.options.columns[e]);else i[0]=o.options.columns;else i.unshift(o.options.columns);if(o.options.rows&&i.length)if(o.options.colIndexes)for(var e=0;e<o.options.rows.length;e++)for(var s=0;s<o.options.colIndexes.length;s++)i[e+1].splice(o.options.colIndexes[s],0,o.options.rows[e][s]);else t.merge(i,o.options.rows);return i},o.drawChart=function(){if(o.data=new google.visualization.arrayToDataTable(o.dataArray),!o.data||!o.data.getNumberOfRows())return o.showTableChart("show","remove"),void console.log("Google Charts data table failed");if(o.cchartOptions.formatter&&"none"!==o.cchartOptions.formatter.type){var e=new google.visualization[o.cchartOptions.formatter.type](o.cchartOptions.formatter);e.format(o.data,o.cchartOptions.formatter.column)}if(o.tableHasData&&(o.cchartOptions.title=o.cchartOptions.title||o.tableCaption.text()||""),"Calendar"===o.options.chartType&&(o.cchartOptions.calendar.cellSize=o.cchartOptions.calendar.cellSize||h.width()*o.cchartOptions.cellScaleFactor),o.cchartOptions.fontSize&&isNaN(parseInt(o.cchartOptions.fontSize,10))&&(o.cchartOptions.fontSize=o.getFontSize(o.cchartOptions.fontSize,16)),o.cchartOptions.titleTextStyle&&o.cchartOptions.titleTextStyle.fontSize&&isNaN(parseInt(o.cchartOptions.titleTextStyle.fontSize,10))&&(o.cchartOptions.titleTextStyle.fontSize=o.getFontSize(o.cchartOptions.titleTextStyle.fontSize,16)),o.cchartOptions.calendar&&(o.cchartOptions.calendar.monthLabel&&o.cchartOptions.calendar.monthLabel.fontSize&&isNaN(parseInt(o.cchartOptions.calendar.monthLabel.fontSize,10))&&(o.cchartOptions.calendar.monthLabel.fontSize=o.getFontSize(o.cchartOptions.calendar.monthLabel.fontSize,16)),o.cchartOptions.calendar.dayOfWeekLabel&&o.cchartOptions.calendar.dayOfWeekLabel.fontSize&&isNaN(parseInt(o.cchartOptions.calendar.dayOfWeekLabel.fontSize,10))&&(o.cchartOptions.calendar.dayOfWeekLabel.fontSize=o.getFontSize(o.cchartOptions.calendar.dayOfWeekLabel.fontSize,16))),o.setDimensions(),"BarChart"===o.options.chartType&&!o.options.chartAspectRatio&&!o.chartOptions.height){var s=o.cchartOptions.fontSize||o.getFontSize("body",16);o.cchartOptions.height=2*s*o.data.getNumberOfRows()}o.chart=new google.visualization[o.options.chartType](h.get(0)),google.visualization.events.addListener(o.chart,"ready",function(e){if(o.showTableChart(o.options.showTable,"show"),o.windowWidth=t(i).width(),o.chartParentWidth=o.chartParent.width(),o.options.chartZoom||o.options.chartOffset){var s="",n=h.children(":last"),a=0,l=0,r=parseFloat(o.options.chartZoom)||0,c=1/r||1,u=parseInt(o.options.chartOffset[0])||0,d=parseInt(o.options.chartOffset[1])||0;u=u*h.width()*r/100,d=d*h.height()*r/100,r&&(s="scale("+r+")",a=(h.height()*r-h.height())/2/r,l=(h.width()*r-h.width())/2/r),(u||d)&&(s+=" translate("+u+"px,"+d+"px)",a-=d,l-=u),n.css("transform",s),h.css("overflow","hidden"),t("<style> ."+o.chartId+" .google-visualization-tooltip { top: "+a+"px !important; left: "+l+"px !important; transform: scale("+c+")} </style>").appendTo("head")}"Calendar"===o.options.chartType&&(h.find('text:contains("'+o.cchartOptions.title+'")').css({fill:o.cchartOptions.titleTextStyle.color,fontWeight:o.cchartOptions.titleTextStyle.fontWeight,fontSize:o.cchartOptions.titleTextStyle.fontSize,fontFamily:o.cchartOptions.titleTextStyle.fontName}),t("<style> ."+o.chartId+" .google-visualization-tooltip span { color: "+o.cchartOptions.tooltip.textStyle.color+" !important; font-size: "+o.cchartOptions.tooltip.textStyle.fontSize+'px !important; font-family: "'+o.cchartOptions.tooltip.textStyle.fontName+'" !important; } </style>').appendTo("head"))}),google.visualization.events.addListener(o.chart,"error",function(t){o.showTableChart("show","remove"),console.log(t)}),o.chart.draw(o.data,o.cchartOptions)},o.formatSheet=function(t){var i=[];if(t&&!t.statusText)try{for(var e=t.split(/\r\n|\n/),s=[],n=0;n<e.length;n++){var a=e[n].split(",");e[n]=a}o.options.transpose&&(e=o.transpose(e)),s=e[0];for(var n=0;n<s.length;n++)"TOOLTIP"===s[n].toUpperCase()?s[n]={type:"string",role:"tooltip"}:"ANNOTATION"===s[n].toUpperCase()?s[n]={type:"string",role:"annotation"}:s[n]={label:s[n]};i=e,i[0]=s,i=o.formatData(i)}catch(h){console.log(h)}return i},o.getTableData=function(i){var e=[];try{var s=i.find("tr").not(i.find("tfoot tr")),n=[];s.each(function(i){n.push([]),t(this).find("td, th").each(function(e){var s=t(this),o={};s.attr("data-type")&&(o.type=s.attr("data-type")),s.attr("data-role")&&(o.role=s.attr("data-role")),o.label=s.text(),n[i].push(o)})}),o.options.transpose&&(n=o.transpose(n)),e.push(n[0]);for(var a=1;a<n.length;a++){for(var h=[],l=0;l<n[a].length;l++){var r=n[a][l].label||"";h.push(r)}h.length>0&&e.push(h)}e=o.formatData(e)}catch(c){return console.log(c),[]}return e},o.formatData=function(i){var e=i;try{var s=[],n=[],a=[],h=function(t,i){return-1===o.options.ignoreRow.indexOf(i)},l=function(t,i){return-1===o.options.ignoreCol.indexOf(i)},r=function(t,i){return-1===s.indexOf(i)};o.options.tooltipConcat&&n.push("tooltip"),o.options.annotationConcat&&n.push("annotation"),e=t.grep(e,h);for(var c=0;c<e.length;c++)e[c]=t.grep(e[c],l);if(n.length){for(var u="",d=0;d<e[0].length;d++){var p=e[0][d].role||"";p&&-1!==n.indexOf(p)&&s.push(d)}for(var c=0;c<e.length;c++)e[c]=t.grep(e[c],r);for(var d=0;d<e[0].length;d++){var p=e[0][d].role||"",f=e[0][d].label||"";if(("domain"===p||0===d)&&(u=e[0][d]),(!p||-1===n.indexOf(p))&&d>0)for(var c=0;c<n.length;c++)d++,e[0].splice(d,0,{type:"string",role:n[c]}),a.push({index:d,domain:u,role:n[c],label:f})}for(var d=1;d<e.length;d++)for(var c=0;c<a.length;c++){var g="";"toolip"===a[c].role?g=o.options.tooltipConcat:"annotation"===a[c].role&&(g=o.options.annotationConcat),g=g.replace(new RegExp("domain","g"),a[c].domain),g=g.replace(new RegExp("label","g"),a[c].label),g=g.replace(new RegExp("data","g"),e[d][a[c].index]),e[d].splice(a[c].index,0,g)}}for(var d=1;d<e.length;d++){for(var m=[],c=0;c<e[d].length;c++){var v=e[0][c].type||"",S=e[0][c].role||"",x=e[d][c]||"";if(-1===["tooltip","annotation"].indexOf(S))if("date"===v||"datetime"===v)x=new Date(x);else if("number"===v)x=parseFloat(x);else if("boolean"===v){var y=x.toLowerCase();x="false"!==y&&"0"!==y&&"no"!==y&&""!==y}else"timeofday"===v?x=x.getTime():0!==c&&(isNaN(parseFloat(x))?"Invalid Date"===new Date(x)||isNaN(new Date(x))||(x=new Date(x)):x=parseFloat(x));m.push(x)}m.length>0&&(e[d]=m)}}catch(w){return console.log(w),[]}return e},o.generateTable=function(i,e,s,n){for(var o='<table id="'+s+'" class="'+s+" "+n+'"><caption>'+e+"</caption><thead><tr>",a=0;a<i[0].length;a++)i[0][a].role&&"tooltip"===i[0][a].role?o+="<th>Tooltip</th>":i[0][a].role&&"annotation"===i[0][a].role?o+="<th>Annotation</th>":i[0][a].label&&(o+="<th>"+i[0][a].label+"</th>");o+="</tr></thead><tbody>";for(var a=1;a<i.length;a++){o+="<tr>";for(var h=0;h<i[a].length;h++){var l=isNaN(i[a][h])?"left":"right";o+='<td align="'+l+'">'+i[a][h]+"</td>"}o+="</tr>"}return o+="</tbody></table>",t(o)},o.addResize=function(){t(i).on({resize:function(){clearTimeout(o.timer),o.timer=setTimeout(function(){if(t(i).width()!==o.windowWidth){var e=h.attr("style");h.removeAttr("style"),o.chartParent.width()!==o.chartParentWidth?(o.cchartOptions.calendar&&!o.options.calendar.calendar.cellSize&&(o.cchartOptions.calendar.cellSize=.017*h.width()),o.setDimensions(),o.chart.draw(o.data,o.cchartOptions)):h.attr("style",e)}},500)}})},o.showTableChart=function(t,i){var e=a?a.length:!1,s=h?h.length:!1;"show"===t&&e?(a.css("opacity",0),a.css(o.options.showTableCSS),a.fadeTo(400,1)):"hide"===t&&e?a.css(o.options.hideTableCSS):"remove"===t&&e&&a.css("display","none"),"show"===i&&s?(h.css("opacity",0),h.css(o.options.showChartCSS),h.fadeTo(400,1)):"hide"===i&&s?h.css(o.options.showChartCSS):"remove"===i&&s&&h.css("display","none")},o.getFontSize=function(i,e){return parseInt(t(i).css("fontSize"),10)||e},o.transpose=function(t){for(var i=new Array(t[0].length),e=0;e<t[0].length;e++){i[e]=new Array(t.length);for(var s=0;s<t.length;s++)i[e][s]=t[s][e]}return i},o.setDimensions=function(){o.chartParentWidth=o.chartParent.width(),o.options.chartAspectRatio?o.chartOptions.width&&!o.chartOptions.height?o.cchartOptions.height=o.chartOptions.width/o.options.chartAspectRatio:!o.chartOptions.width&&o.chartOptions.height?o.cchartOptions.width=o.chartOptions.height*o.options.chartAspectRatio:o.chartOptions.width||o.chartOptions.height||(o.cchartOptions.width=h.width(),o.cchartOptions.height=h.width()/o.options.chartAspectRatio):o.chartOptions.width||o.chartOptions.height||(o.cchartOptions.width=h.width())},o.camelCase=function(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,i){return 0===+t?"":0===i?t.toLowerCase():t.toUpperCase()})},o.init(e,n),this};t.fn.chartinator=function(i){return this.each(function(){var e=t(this);e.data("chartinator")||t(this).data("chartinator",new o(this,i))})}}(jQuery,window,document,Math);