!function(e,t){"use strict";function r(e,t){for(var r=e.split(/\n/g),n=0;n<r.length;n++){var i=r[n];if(!(t>=i.length))return{line:n+1,column:t+1};t-=i.length}}function n(e){function t(t){return e}var r=b[e];return null!=r?r:(t.$$watchDelegate=function(t,r,n){var i=t.$watch(F,function(){r(e,e,t),i()},n);return i},b[e]=t,t.exp=e,t.expressions=[],t)}function i(e,t){function r(e){return null==e?e:e-t}function n(t){return r(e(t))}if(0===t)return e;var i;return n.$$watchDelegate=function(t,n,a){return i=t.$watch(e,function(e,i){n(r(e),r(i),t)},a)},n}function a(e,t){var r=this;if(this.expressionFn=e,this.choices=t,void 0===t.other)throw R("reqother","“other” is a required option.");this.parsedFn=function(e){return r.getResult(e)},this.parsedFn.$$watchDelegate=function(e,t,n){return r.watchDelegate(e,t,n)},this.parsedFn.exp=e.exp,this.parsedFn.expressions=e.expressions}function o(e,t,r,n){var i=this;this.scope=t,this.msgSelector=e,this.listener=r,this.objectEquality=n,this.lastMessage=void 0,this.messageFnWatcher=F;var a=function(e,t){return i.expressionFnListener(e,t)};this.expressionFnWatcher=t.$watch(e.expressionFn,a,n)}function s(e,t){a.call(this,e,t)}function l(){}function c(e,t,r,n){a.call(this,e,t),this.offset=r,this.pluralCat=n}function h(){}function d(e,t){this.trustedContext=e,this.allOrNothing=t,this.textParts=[],this.expressionFns=[],this.expressionIndices=[],this.partialText="",this.concatParts=null}function u(e,t,r,n){this.interpolationParts=e,this.scope=t,this.previousResult=void 0,this.listener=r;var i=this;this.expressionFnsWatcher=t.$watchGroup(e.expressionFns,function(e,t){i.watchListener(e,t)})}function f(e,t){t.expressionFn=e.expressionFn,t.expressionMinusOffsetFn=e.expressionMinusOffsetFn,t.pluralOffset=e.pluralOffset,t.choices=e.choices,t.choiceKey=e.choiceKey,t.interpolationParts=e.interpolationParts,t.ruleChoiceKeyword=e.ruleChoiceKeyword,t.msgStartIndex=e.msgStartIndex,t.expressionStartIndex=e.expressionStartIndex}function p(e){f(e,this)}function g(e,t,r,n,i,a,o,s){this.text=e,this.index=t||0,this.$parse=r,this.pluralCat=n,this.stringifier=i,this.mustHaveExpression=!!a,this.trustedContext=o,this.allOrNothing=!!s,this.expressionFn=null,this.expressionMinusOffsetFn=null,this.pluralOffset=null,this.choices=null,this.choiceKey=null,this.interpolationParts=null,this.msgStartIndex=null,this.nestedStateStack=[],this.parsedFn=null,this.rule=null,this.ruleStack=null,this.ruleChoiceKeyword=null,this.interpNestLevel=null,this.expressionStartIndex=null,this.stringStartIndex=null,this.stringQuote=null,this.stringInterestsRe=null,this.angularOperatorStack=null,this.textPart=null}function v(e){switch(e){case"{":return"}";case"[":return"]";case"(":return")";default:return null}}function x(e){switch(e){case"}":return"{";case"]":return"[";case")":return"(";default:return null}}var b=Object.create(null);a.prototype.getMessageFn=function(e){return this.choices[this.categorizeValue(e)]},a.prototype.getResult=function(e){return this.getMessageFn(this.expressionFn(e))(e)},a.prototype.watchDelegate=function(e,t,r){var n=new o(this,e,t,r);return function(){n.cancelWatch()}},o.prototype.expressionFnListener=function(e,t){var r=this;this.messageFnWatcher();var n=function(e,t){return r.messageFnListener(e,t)},i=this.msgSelector.getMessageFn(e);this.messageFnWatcher=this.scope.$watch(i,n,this.objectEquality)},o.prototype.messageFnListener=function(e,t){this.listener.call(null,e,e===t?e:this.lastMessage,this.scope),this.lastMessage=e},o.prototype.cancelWatch=function(){this.expressionFnWatcher(),this.messageFnWatcher()},l.prototype=a.prototype,s.prototype=new l,s.prototype.categorizeValue=function(e){return void 0!==this.choices[e]?e:"other"},h.prototype=a.prototype,c.prototype=new h,c.prototype.categorizeValue=function(e){if(isNaN(e))return"other";if(void 0!==this.choices[e])return e;var t=this.pluralCat(e-this.offset);return void 0!==this.choices[t]?t:"other"},d.prototype.flushPartialText=function(){this.partialText&&(null==this.concatParts?this.textParts.push(this.partialText):(this.textParts.push(this.concatParts.join("")),this.concatParts=null),this.partialText="")},d.prototype.addText=function(e){e.length&&(this.partialText?this.concatParts?this.concatParts.push(e):this.concatParts=[this.partialText,e]:this.partialText=e)},d.prototype.addExpressionFn=function(e){this.flushPartialText(),this.expressionIndices.push(this.textParts.length),this.expressionFns.push(e),this.textParts.push("")},d.prototype.getExpressionValues=function(e){for(var t=new Array(this.expressionFns.length),r=0;r<this.expressionFns.length;r++)t[r]=this.expressionFns[r](e);return t},d.prototype.getResult=function(e){for(var t=0;t<this.expressionIndices.length;t++){var r=e[t];if(this.allOrNothing&&void 0===r)return;this.textParts[this.expressionIndices[t]]=r}return this.textParts.join("")},d.prototype.toParsedFn=function(e,t){var r=this;if(this.flushPartialText(),e&&0===this.expressionFns.length)return void 0;if(0===this.textParts.length)return n("");if(this.trustedContext&&this.textParts.length>1&&R.throwNoconcat(t),0===this.expressionFns.length)return 1!==this.textParts.length&&this.errorInParseLogic(),n(this.textParts[0]);var i=function(e){return r.getResult(r.getExpressionValues(e))};i.$$watchDelegate=function(e,t,n){return r.watchDelegate(e,t,n)},i.exp=t,i.expressions=new Array(this.expressionFns.length);for(var a=0;a<this.expressionFns.length;a++)i.expressions[a]=this.expressionFns[a].exp;return i},d.prototype.watchDelegate=function(e,t,r){var n=new u(this,e,t,r);return function(){n.cancelWatch()}},u.prototype.watchListener=function(e,t){var r=this.interpolationParts.getResult(e);this.listener.call(null,r,e===t?r:this.previousResult,this.scope),this.previousResult=r},u.prototype.cancelWatch=function(){this.expressionFnsWatcher()};var m=new p(new g("",0,null,null,null,!1,null,!1));g.prototype.pushState=function(){this.nestedStateStack.push(new p(this)),f(m,this)},g.prototype.popState=function(){0===this.nestedStateStack.length&&this.errorInParseLogic();var e=this.nestedStateStack.pop();f(e,this)},g.prototype.matchRe=function(e,t){e.lastIndex=this.index;var r=e.exec(this.text);return null==r||t!==!0&&r.index!==this.index?null:(this.index=e.lastIndex,r)},g.prototype.searchRe=function(e){return this.matchRe(e,!0)},g.prototype.consumeRe=function(e){return!!this.matchRe(e)},g.prototype.run=function(e){this.ruleStack=[e];do{for(this.rule=this.ruleStack.pop();this.rule;)this.rule();this.assertRuleOrNull(this.rule)}while(this.ruleStack.length>0)},g.prototype.errorInParseLogic=function(){throw R("logicbug","The messageformat parser has encountered an internal error.  Please file a github issue against the AngularJS project and provide this message text that triggers the bug.  Text: “{0}”",this.text)},g.prototype.assertRuleOrNull=function(e){void 0===e&&this.errorInParseLogic()};var C=/\s*(\w+)\s*/g;g.prototype.errorExpecting=function(){var e,t=this.matchRe(C);if(null==t)throw e=r(this.text,this.index),R("reqarg","Expected one of “plural” or “select” at line {0}, column {1} of text “{2}”",e.line,e.column,this.text);var n=t[1];throw"select"===n||"plural"===n?(e=r(this.text,this.index),R("reqcomma","Expected a comma after the keyword “{0}” at line {1}, column {2} of text “{3}”",n,e.line,e.column,this.text)):(e=r(this.text,this.index),R("unknarg","Unsupported keyword “{0}” at line {0}, column {1}. Only “plural” and “select” are currently supported.  Text: “{3}”",n,e.line,e.column,this.text))};var y=/['"]/g;g.prototype.ruleString=function(){var e=this.matchRe(y);if(null==e){var t=r(this.text,this.index);throw R("wantstring","Expected the beginning of a string at line {0}, column {1} in text “{2}”",t.line,t.column,this.text)}this.startStringAtMatch(e)},g.prototype.startStringAtMatch=function(e){this.stringStartIndex=e.index,this.stringQuote=e[0],this.stringInterestsRe="'"===this.stringQuote?A:w,this.rule=this.ruleInsideString};var A=/\\(?:\\|'|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|'/g,w=/\\(?:\\|"|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|"/g;g.prototype.ruleInsideString=function(){var e=this.searchRe(this.stringInterestsRe);if(null==e){var t=r(this.text,this.stringStartIndex);throw R("untermstr","The string beginning at line {0}, column {1} is unterminated in text “{2}”",t.line,t.column,this.text)}e[0]===this.stringQuote&&(this.rule=null)};var _=/\s*(plural|select)\s*,\s*/g;g.prototype.rulePluralOrSelect=function(){var e=this.searchRe(_);null==e&&this.errorExpecting();var t=e[1];switch(t){case"plural":this.rule=this.rulePluralStyle;break;case"select":this.rule=this.ruleSelectStyle;break;default:this.errorInParseLogic()}},g.prototype.rulePluralStyle=function(){this.choices=Object.create(null),this.ruleChoiceKeyword=this.rulePluralValueOrKeyword,this.rule=this.rulePluralOffset},g.prototype.ruleSelectStyle=function(){this.choices=Object.create(null),this.ruleChoiceKeyword=this.ruleSelectKeyword,this.rule=this.ruleSelectKeyword};var k=/[0]|(?:[1-9][0-9]*)/g,B=new RegExp("\\s*offset\\s*:\\s*("+k.source+")","g");g.prototype.rulePluralOffset=function(){var e=this.matchRe(B);this.pluralOffset=null==e?0:parseInt(e[1],10),this.expressionMinusOffsetFn=i(this.expressionFn,this.pluralOffset),this.rule=this.rulePluralValueOrKeyword},g.prototype.assertChoiceKeyIsNew=function(e,t){if(void 0!==this.choices[e]){var n=r(this.text,t);throw R("dupvalue","The choice “{0}” is specified more than once. Duplicate key is at line {1}, column {2} in text “{3}”",e,n.line,n.column,this.text)}};var E=/\s*(\w+)/g;g.prototype.ruleSelectKeyword=function(){var e=this.matchRe(E);return null==e?(this.parsedFn=new s(this.expressionFn,this.choices).parsedFn,void(this.rule=null)):(this.choiceKey=e[1],this.assertChoiceKeyIsNew(this.choiceKey,e.index),void(this.rule=this.ruleMessageText))};var S=new RegExp("\\s*(?:(?:=("+k.source+"))|(\\w+))","g");g.prototype.rulePluralValueOrKeyword=function(){var e=this.matchRe(S);return null==e?(this.parsedFn=new c(this.expressionFn,this.choices,this.pluralOffset,this.pluralCat).parsedFn,void(this.rule=null)):(null!=e[1]?this.choiceKey=parseInt(e[1],10):this.choiceKey=e[2],this.assertChoiceKeyIsNew(this.choiceKey,e.index),void(this.rule=this.ruleMessageText))};var $=/\s*\{/g;g.prototype.ruleMessageText=function(){if(!this.consumeRe($)){var e=r(this.text,this.index);throw R("reqopenbrace","The plural choice “{0}” must be followed by a message in braces at line {1}, column {2} in text “{3}”",this.choiceKey,e.line,e.column,this.text)}this.msgStartIndex=this.index,this.interpolationParts=new d(this.trustedContext,this.allOrNothing),this.rule=this.ruleInInterpolationOrMessageText};var T=/\\.|{{|}/g,I=/\\.|{{|#|}/g,z=/\\.|{{/g;g.prototype.advanceInInterpolationOrMessageText=function(){var e,t=this.index;if(null==this.ruleChoiceKeyword){if(e=this.searchRe(z),null==e)return this.textPart=this.text.substring(t),this.index=this.text.length,null}else if(e=this.searchRe(this.ruleChoiceKeyword===this.rulePluralValueOrKeyword?I:T),null==e){var n=r(this.text,this.msgStartIndex);throw R("reqendbrace","The plural/select choice “{0}” message starting at line {1}, column {2} does not have an ending closing brace. Text “{3}”",this.choiceKey,n.line,n.column,this.text)}var i=e[0];return this.textPart=this.text.substring(t,e.index),i},g.prototype.ruleInInterpolationOrMessageText=function(){var e=this.index,t=this.advanceInInterpolationOrMessageText();return null==t?(this.index=this.text.length,this.interpolationParts.addText(this.text.substring(e)),void(this.rule=null)):"\\"===t[0]?void this.interpolationParts.addText(this.textPart+t[1]):(this.interpolationParts.addText(this.textPart),void("{{"===t?(this.pushState(),this.ruleStack.push(this.ruleEndMustacheInInterpolationOrMessage),this.rule=this.ruleEnteredMustache):"}"===t?(this.choices[this.choiceKey]=this.interpolationParts.toParsedFn(!1,this.text),this.rule=this.ruleChoiceKeyword):"#"===t?this.interpolationParts.addExpressionFn(this.expressionMinusOffsetFn):this.errorInParseLogic()))},g.prototype.ruleInterpolate=function(){this.interpolationParts=new d(this.trustedContext,this.allOrNothing),this.rule=this.ruleInInterpolation},g.prototype.ruleInInterpolation=function(){var e=this.index,t=this.searchRe(z);if(null==t)return this.index=this.text.length,this.interpolationParts.addText(this.text.substring(e)),this.parsedFn=this.interpolationParts.toParsedFn(this.mustHaveExpression,this.text),void(this.rule=null);var r=t[0];return"\\"===r[0]?void this.interpolationParts.addText(this.text.substring(e,t.index)+r[1]):(this.interpolationParts.addText(this.text.substring(e,t.index)),this.pushState(),this.ruleStack.push(this.ruleInterpolationEndMustache),void(this.rule=this.ruleEnteredMustache))},g.prototype.ruleInterpolationEndMustache=function(){var e=this.parsedFn;this.popState(),this.interpolationParts.addExpressionFn(e),this.rule=this.ruleInInterpolation},g.prototype.ruleEnteredMustache=function(){this.parsedFn=null,this.ruleStack.push(this.ruleEndMustache),this.rule=this.ruleAngularExpression},g.prototype.ruleEndMustacheInInterpolationOrMessage=function(){var e=this.parsedFn;this.popState(),this.interpolationParts.addExpressionFn(e),this.rule=this.ruleInInterpolationOrMessageText};var O=/\s*}}/g;g.prototype.ruleEndMustache=function(){var e=this.matchRe(O);if(null==e){var t=r(this.text,this.index);throw R("reqendinterp","Expecting end of interpolation symbol, “{0}”, at line {1}, column {2} in text “{3}”","}}",t.line,t.column,this.text)}null==this.parsedFn&&(this.parsedFn=this.$parse(this.expressionFn,this.stringifier),this.parsedFn.exp=this.expressionFn.exp,this.parsedFn.expressions=this.expressionFn.expressions),this.rule=null},g.prototype.ruleAngularExpression=function(){this.angularOperatorStack=[],this.expressionStartIndex=this.index,this.rule=this.ruleInAngularExpression};var q=/[[\]{}()'",]/g;g.prototype.ruleInAngularExpression=function(){var e,t=this.searchRe(q);if(null==t){if(0===this.angularOperatorStack.length)return this.index=this.text.length,this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index)),this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index),this.expressionFn.expressions=this.expressionFn.expressions,void(this.rule=null);var n=this.angularOperatorStack[0];throw R("badexpr","Unexpected end of AngularJS expression.  Expecting operator “{0}” at the end of the text “{1}”",this.getEndOperator(n),this.text)}var i=t[0];if("'"===i||'"'===i)return this.ruleStack.push(this.ruleInAngularExpression),void this.startStringAtMatch(t);if(","===i){if(this.trustedContext)throw e=r(this.text,this.index),R("unsafe","Use of select/plural MessageFormat syntax is currently disallowed in a secure context ({0}).  At line {1}, column {2} of text “{3}”",this.trustedContext,e.line,e.column,this.text);return void(0===this.angularOperatorStack.length&&(this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,t.index)),this.expressionFn.exp=this.text.substring(this.expressionStartIndex,t.index),this.expressionFn.expressions=this.expressionFn.expressions,this.rule=null,this.rule=this.rulePluralOrSelect))}if(null!=v(i))return void this.angularOperatorStack.unshift(i);var a=x(i);if(null==a&&this.errorInParseLogic(),this.angularOperatorStack.length>0){if(a===this.angularOperatorStack[0])return void this.angularOperatorStack.shift();throw e=r(this.text,this.index),R("badexpr","Unexpected operator “{0}” at line {1}, column {2} in text. Was expecting “{3}”. Text: “{4}”",i,e.line,e.column,v(this.angularOperatorStack[0]),this.text)}this.index=t.index,this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index)),this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index),this.expressionFn.expressions=this.expressionFn.expressions,this.rule=null};var R,H,F,j,U,P=["$parse","$locale","$sce","$exceptionHandler",function(e,t,r,n){function i(e,t,i){return function(a){try{return a=e?r.getTrusted(e,a):r.valueOf(a),t&&void 0===a?a:U(a)}catch(o){n(R.interr(i,o))}}}function a(r,n,a,o){var s=i(a,o,r),l=new g(r,0,e,t.pluralCat,s,n,a,o);return l.run(l.ruleInterpolate),l.parsedFn}return{interpolate:a}}],D=["$$messageFormat","$delegate",function(e,t){if("{{"!==t.startSymbol()||"}}"!==t.endSymbol())throw R("nochgmustache","angular-message-format.js currently does not allow you to use custom start and end symbols for interpolation.");var r=e.interpolate;return r.startSymbol=t.startSymbol,r.endSymbol=t.endSymbol,r}],M=e.angular.module("ngMessageFormat",["ng"]);M.info({angularVersion:"1.7.8"}),M.factory("$$messageFormat",P),M.config(["$provide",function(t){R=e.angular.$interpolateMinErr,H=e.angular.isFunction,F=e.angular.noop,j=e.angular.toJson,U=e.angular.$$stringify,t.decorator("$interpolate",D)}]),describe("$$ngMessageFormat",function(){describe("core",function(){function e(e,t){this.name=e,this.gender=t}function t(e){e.recipients=[s,l,c],e.sender=h}var r,n,i,a,o,s=new e("Alice","female"),l=new e("Bob","male"),c=new e("Charlie","male"),h=new e("Harry Potter","male");beforeEach(module("ngMessageFormat")),beforeEach(function(){inject(["$$messageFormat","$parse","$locale","$interpolate","$rootScope",function(e,s,l,c,h){r=e,n=s,i=c,a=l,o=h,t(h)}])}),describe("mustache",function(){function e(e,t){var r=i(e);expect(r(o)).toEqual(t)}it("should suppress falsy objects",function(){e("{{undefined}}",""),e("{{null}}",""),e("{{a.b}}","")}),it("should jsonify objects",function(){e("{{ {} }}","{}"),e("{{ true }}","true"),e("{{ false }}","false"),e("{{ 1 }}","1"),e("{{ '1' }}","1"),e("{{ sender }}",'{"name":"Harry Potter","gender":"male"}')}),it("should return function that can be called with no context",inject(function(e){expect(e("{{sender.name}}")()).toEqual("")})),describe("watchable",function(){it("ckck",function(){var e=[];o.$watch(i("{{::name}}"),function(t){e.push(t)}),o.$apply(),expect(e.length).toBe(1),o.name="foo",o.$apply(),expect(e.length).toBe(2),expect(e[1]).toBe("foo"),o.name="bar",o.$apply(),expect(e.length).toBe(2)}),it("should stop watching strings with no expressions after first execution",function(){var e=jasmine.createSpy();o.$watch(r.interpolate("foo"),e),o.$digest(),expect(o.$countWatchers()).toBe(0),expect(e).toHaveBeenCalledWith("foo","foo",o),expect(e).toHaveBeenCalledTimes(1)}),it("should stop watching strings with only constant expressions after first execution",function(){var e=jasmine.createSpy();o.$watch(r.interpolate("foo {{42}}"),e),o.$digest(),expect(o.$countWatchers()).toBe(0),expect(e).toHaveBeenCalledWith("foo 42","foo 42",o),expect(e).toHaveBeenCalledTimes(1)})}),describe("plural",function(){it("no interpolation",function(){var e="{{recipients.length, plural,\n    =0    {You gave no gifts}\n    =1    {You gave one person a gift}\n    one   {YOU SHOULD NEVER SEE THIS MESSAGE}\n    other {You gave some people gifts}\n}}",t=i(e,!0);expect(t.expressions.length).toBe(1),expect(t.expressions[0]).toEqual("recipients.length"),o.recipients.length=2,expect(t(o)).toEqual("You gave some people gifts"),o.recipients.length=1,expect(t(o)).toEqual("You gave one person a gift"),o.recipients.length=0,expect(t(o)).toEqual("You gave no gifts")}),it("with interpolation",function(){var e="{{recipients.length, plural,\n    =0    {{{sender.name}} gave no gifts}\n    =1    {{{sender.name}} gave one gift to {{recipients[0].name}}}\n    one   {YOU SHOULD NEVER SEE THIS MESSAGE}\n    other {{{sender.name}} gave them a gift}\n}}",t=i(e,!0);expect(t.expressions.length).toBe(1),expect(t.expressions[0]).toEqual("recipients.length"),o.recipients.length=2,expect(t(o)).toEqual("Harry Potter gave them a gift"),o.recipients.length=1,expect(t(o)).toEqual("Harry Potter gave one gift to Alice"),o.recipients.length=0,expect(t(o)).toEqual("Harry Potter gave no gifts")}),it('with offset, interpolation, "#" symbol with and without escaping',function(){var e="{{recipients.length, plural, offset:1\n    =0    {{{sender.name}} gave no gifts (\\#=#)}\n    =1    {{{sender.name}} gave one gift to {{recipients[0].name}} (\\#=#)}\n    one   {{{sender.name}} gave {{recipients[0].name}} and one other person a gift (\\#=#)}\n    other {{{sender.name}} gave {{recipients[0].name}} and # other people a gift (\\#=#)}\n}}",t=i(e,!0);expect(t.expressions.length).toBe(1),expect(t.expressions[0]).toEqual("recipients.length"),o.recipients.length=3,expect(t(o)).toEqual("Harry Potter gave Alice and 2 other people a gift (#=2)"),o.recipients.length=2,expect(t(o)).toEqual("Harry Potter gave Alice and one other person a gift (#=1)"),o.recipients.length=1,expect(t(o)).toEqual("Harry Potter gave one gift to Alice (#=0)"),o.recipients.length=0,expect(t(o)).toEqual("Harry Potter gave no gifts (#=-1)")})}),it("nested plural and select",function(){var e="{{recipients.length, plural,\n    =0 {You gave no gifts}\n    =1 {{{recipients[0].gender, select,\n            male {You gave him a gift. -{{sender.name}}}\n            female {You gave her a gift. -{{sender.name}}}\n            other {You gave them a gift. -{{sender.name}}}\n        }}\n       }\n    other {You gave {{recipients.length}} people gifts. -{{sender.name}}}\n}}",t=i(e,!0);expect(t.expressions.length).toBe(1),expect(t.expressions[0]).toEqual("recipients.length");var r=t(o);expect(r).toEqual("You gave 3 people gifts. -Harry Potter")})}),describe("interpolate",function(){function e(e,t){var n=r.interpolate(e);expect(n(o)).toEqual(t)}it("should interpolate a plain string",function(){e(" Hello, world! "," Hello, world! ")}),it("should interpolate a simple expression",function(){e("Hello, {{sender.name}}!","Hello, Harry Potter!")})})}),describe("$interpolate",function(){beforeEach(module("ngMessageFormat")),describe("startSymbol",function(){it("should expose the startSymbol in run phase",inject(function(e){expect(e.startSymbol()).toBe("{{")})),describe("redefinition",function(){beforeEach(module(function(e){expect(e.startSymbol()).toBe("{{"),e.startSymbol("((")})),it("should not work when the startSymbol is redefined",function(){expect(function(){inject(inject(function(e){}))}).toThrowMinErr("$interpolate","nochgmustache")})})}),describe("endSymbol",function(){it("should expose the endSymbol in run phase",inject(function(e){expect(e.endSymbol()).toBe("}}")})),describe("redefinition",function(){beforeEach(module(function(e){expect(e.endSymbol()).toBe("}}"),e.endSymbol("))")})),it("should not work when the endSymbol is redefined",function(){expect(function(){inject(inject(function(e){}))}).toThrowMinErr("$interpolate","nochgmustache")})})}),it("should return the interpolation object when there are no bindings and textOnly is undefined",inject(function(e){var t=e("some text");expect(t.exp).toBe("some text"),expect(t.expressions).toEqual([]),expect(t({})).toBe("some text")})),it("should return undefined when there are no bindings and textOnly is set to true",inject(function(e){expect(e("some text",!0)).toBeUndefined()})),it("should return undefined when there are bindings and strict is set to true",inject(function(e){expect(e("test {{foo}}",!1,null,!0)({})).toBeUndefined()})),it("should suppress falsy objects",inject(function(e){expect(e("{{undefined}}")({})).toEqual(""),expect(e("{{null}}")({})).toEqual(""),expect(e("{{a.b}}")({})).toEqual("")})),it("should jsonify objects",inject(function(e){expect(e("{{ {} }}")({})).toEqual("{}"),expect(e("{{ true }}")({})).toEqual("true"),expect(e("{{ false }}")({})).toEqual("false")})),it("should use custom toString when present",inject(function(e,t){var r={a:{toString:function(){return"foo"}}};expect(e("{{ a }}")(r)).toEqual("foo")})),it("should NOT use toString on array objects",inject(function(e){expect(e("{{a}}")({a:[]})).toEqual("[]")})),it("should NOT use toString on Date objects",inject(function(e){var t=new Date(2014,10,10);expect(e("{{a}}")({a:t})).toBe(JSON.stringify(t)),expect(e("{{a}}")({a:t})).not.toEqual(t.toString())})),it("should return interpolation function",inject(function(e,t){var r=e("Hello {{name}}!");expect(r.exp).toBe("Hello {{name}}!"),expect(r.expressions).toEqual(["name"]);var n=t.$new();n.name="Bubu",expect(r(n)).toBe("Hello Bubu!")})),it("should ignore undefined model",inject(function(e){expect(e("Hello {{'World'}}{{foo}}")({})).toBe("Hello World")})),it("should interpolate with undefined context",inject(function(e){expect(e("Hello, world!{{bloop}}")()).toBe("Hello, world!")})),describe("watching",function(){it("should be watchable with any input types",inject(function(e,t){var r;t.$watch(e("{{i}}"),function(e){r=e}),t.$apply(),expect(r).toBe(""),t.i=null,t.$apply(),expect(r).toBe(""),t.i="",t.$apply(),expect(r).toBe(""),t.i=0,t.$apply(),expect(r).toBe("0"),t.i=[0],t.$apply(),expect(r).toBe("[0]"),t.i={a:1,b:2},t.$apply(),expect(r).toBe('{"a":1,"b":2}')})),it("should be watchable with literal values",inject(function(e,t){var r;t.$watch(e('{{1}}{{"2"}}{{true}}{{[false]}}{{ {a: 2} }}'),function(e){r=e}),t.$apply(),expect(r).toBe('12true[false]{"a":2}'),expect(t.$countWatchers()).toBe(0)})),it("should respect one-time bindings for each individual expression",inject(function(e,t){var r=[];t.$watch(e("{{::a | limitTo:1}} {{::s}} {{::i | number}}"),function(e){r.push(e)}),t.$apply(),expect(r.length).toBe(1),t.a=[1],t.$apply(),expect(r.length).toBe(2),expect(r[1]).toBe("[1]  "),t.a=[0],t.$apply(),expect(r.length).toBe(2),t.i=t.a=123,t.s="str!",t.$apply(),expect(r.length).toBe(3),expect(r[2]).toBe("[1] str! 123"),expect(t.$countWatchers()).toBe(0)})),it("should stop watching strings with no expressions after first execution",inject(function(e,t){var r=jasmine.createSpy();t.$watch(e("foo"),r),t.$digest(),expect(t.$countWatchers()).toBe(0),expect(r).toHaveBeenCalledWith("foo","foo",t),expect(r).toHaveBeenCalledTimes(1)})),it("should stop watching strings with only constant expressions after first execution",inject(function(e,t){var r=jasmine.createSpy();t.$watch(e("foo {{42}}"),r),t.$digest(),expect(t.$countWatchers()).toBe(0),expect(r).toHaveBeenCalledWith("foo 42","foo 42",t),expect(r).toHaveBeenCalledTimes(1)}))}),describe("interpolation escaping",function(){var e;beforeEach(function(){e={foo:"Hello",bar:"World"}}),it("should support escaping interpolation signs",inject(function(t){expect(t("{{foo}} \\{\\{bar\\}\\}")(e)).toBe("Hello {{bar}}"),expect(t("\\{\\{foo\\}\\} {{bar}}")(e)).toBe("{{foo}} World")})),it("should unescape multiple expressions",inject(function(t){expect(t("\\{\\{foo\\}\\}\\{\\{bar\\}\\} {{foo}}")(e)).toBe("{{foo}}{{bar}} Hello"),expect(t("{{foo}}\\{\\{foo\\}\\}\\{\\{bar\\}\\}")(e)).toBe("Hello{{foo}}{{bar}}"),expect(t("\\{\\{foo\\}\\}{{foo}}\\{\\{bar\\}\\}")(e)).toBe("{{foo}}Hello{{bar}}"),expect(t("{{foo}}\\{\\{foo\\}\\}{{bar}}\\{\\{bar\\}\\}{{foo}}")(e)).toBe("Hello{{foo}}World{{bar}}Hello")})),it("should unescape incomplete escaped expressions",inject(function(t){expect(t("\\{\\{foo{{foo}}")(e)).toBe("{{fooHello"),expect(t("\\}\\}foo{{foo}}")(e)).toBe("}}fooHello"),expect(t("foo{{foo}}\\{\\{")(e)).toBe("fooHello{{"),expect(t("foo{{foo}}\\}\\}")(e)).toBe("fooHello}}")})),it("should not unescape markers within expressions",inject(function(t){expect(t('{{"\\\\{\\\\{Hello, world!\\\\}\\\\}"}}')(e)).toBe("\\{\\{Hello, world!\\}\\}"),expect(t('{{"\\{\\{Hello, world!\\}\\}"}}')(e)).toBe("{{Hello, world!}}"),expect(function(){t("{{\\{\\{foo\\}\\}}}")(e)}).toThrowMinErr("$parse","lexerr","Lexer Error: Unexpected next character  at columns 0-0 [\\] in expression [\\{\\{foo\\}\\}]")})),it("should evaluate expressions between escaped start/end symbols",inject(function(t){expect(t("\\{\\{Hello, {{bar}}!\\}\\}")(e)).toBe("{{Hello, World!}}")}))}),describe("interpolating in a trusted context",function(){var e;beforeEach(function(){function t(){}var r={log:t,warn:t,info:t,error:t};module(function(e,t){e.value("$log",r),t.enabled(!0)}),inject(["$sce",function(t){e=t}])}),it("should NOT interpolate non-trusted expressions",inject(function(t,r){var n=r.$new();n.foo="foo",expect(function(){t("{{foo}}",!0,e.CSS)(n)}).toThrowMinErr("$interpolate","interr")})),it("should NOT interpolate mistyped expressions",inject(function(t,r){var n=r.$new();n.foo=e.trustAsCss("foo"),expect(function(){t("{{foo}}",!0,e.HTML)(n)}).toThrowMinErr("$interpolate","interr")})),it("should interpolate trusted expressions in a regular context",inject(function(t){var r=e.trustAsCss("foo");expect(t("{{foo}}",!0)({foo:r})).toBe("foo")})),it("should interpolate trusted expressions in a specific trustedContext",inject(function(t){var r=e.trustAsCss("foo");expect(t("{{foo}}",!0,e.CSS)({foo:r})).toBe("foo")})),it("should NOT interpolate trusted expressions with multiple parts",inject(function(t){var r=e.trustAsCss("foo"),n=e.trustAsCss("bar");expect(function(){return t("{{foo}}{{bar}}",!0,e.CSS)({foo:r,bar:n})}).toThrowMinErr("$interpolate","noconcat","Error while interpolating: {{foo}}{{bar}}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce")}))}),describe("parseBindings",function(){it("should Parse Text With No Bindings",inject(function(e){expect(e("a").expressions).toEqual([])})),it("should Parse Empty Text",inject(function(e){expect(e("").expressions).toEqual([])})),it("should Parse Inner Binding",inject(function(e){var t=e("a{{b}}C"),r=t.expressions;expect(r).toEqual(["b"]),expect(t({b:123})).toEqual("a123C")})),it("should Parse Ending Binding",inject(function(e){var t=e("a{{b}}"),r=t.expressions;expect(r).toEqual(["b"]),expect(t({b:123})).toEqual("a123")})),it("should Parse Begging Binding",inject(function(e){var t=e("{{b}}c"),r=t.expressions;expect(r).toEqual(["b"]),expect(t({b:123})).toEqual("123c")})),it("should Parse Loan Binding",inject(function(e){var t=e("{{b}}"),r=t.expressions;expect(r).toEqual(["b"]),expect(t({b:123})).toEqual("123")})),it("should Parse Two Bindings",inject(function(e){var t=e("{{b}}{{c}}"),r=t.expressions;expect(r).toEqual(["b","c"]),expect(t({b:111,c:222})).toEqual("111222")})),it("should Parse Two Bindings With Text In Middle",inject(function(e){var t=e("{{b}}x{{c}}"),r=t.expressions;expect(r).toEqual(["b","c"]),expect(t({b:111,c:222})).toEqual("111x222")})),it("should Parse Multiline",inject(function(e){var t=e('"X\nY{{A\n+B}}C\nD"'),r=t.expressions;expect(r).toEqual(["A\n+B"]),expect(t({A:"aa",B:"bb"})).toEqual('"X\nYaabbC\nD"')}))}),describe("isTrustedContext",function(){it("should NOT interpolate a multi-part expression when isTrustedContext is true",inject(function(e){var t=!0;expect(function(){e("constant/{{var}}",!0,t)}).toThrowMinErr("$interpolate","noconcat","Error while interpolating: constant/{{var}}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce"),expect(function(){e("{{var}}/constant",!0,t)}).toThrowMinErr("$interpolate","noconcat","Error while interpolating: {{var}}/constant\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce"),expect(function(){e("{{foo}}{{bar}}",!0,t)}).toThrowMinErr("$interpolate","noconcat","Error while interpolating: {{foo}}{{bar}}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce")})),it("should interpolate a multi-part expression when isTrustedContext is false",inject(function(e){expect(e("some/{{id}}")({})).toEqual("some/"),expect(e("some/{{id}}")({id:1})).toEqual("some/1"),expect(e("{{foo}}{{bar}}")({foo:1,bar:2})).toEqual("12")}))})})})}(window,window.angular);